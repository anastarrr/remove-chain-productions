(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}})();window.onload=()=>{const e=document.getElementById("apply"),r=document.getElementById("ex1"),n=document.getElementById("ex2"),i=document.getElementById("ex3");e.onclick=h,r.onclick=O,n.onclick=L,i.onclick=b};function h(){y(["chain","chain-res"]);const e=I(),r=A(e),n=g(r);E(n,"chain-res",1)}function y(e){e.forEach(r=>{const n=document.getElementById(r);n.innerHTML=""})}function E(e,r,n){const i=document.getElementById(r),t=document.createElement("span");t.innerHTML=`P${n===1?"'":"''"}:`,i.appendChild(t),Object.entries(e).forEach(([o,c])=>{let s="";c.forEach((l,d)=>{s+=l,d+1<c.length&&(s+=" | ")});let u=`${o} → ${s}`;const a=document.createElement("div");a.innerHTML=u,i.appendChild(a)})}function f(e,r,n,i,t){const o=Array.from(e);let c=`N<sup>${r}</sup>`;n?c=c+`<sub>${n}</sub> = `:c=c+" = ",o.length===0?c+="ø":(c+="{",o.forEach((a,l)=>{c+=l+1<o.length?`${a}, `:`${a}}`}));const s=document.createElement("div");s.innerHTML=c,s.style.marginBottom=`${t}px`,document.getElementById(i).appendChild(s)}function g(e){const r={};return Object.entries(e).forEach(([n,i])=>{const t=new Set;t.add(n);let o=!0,c=0;for(f(t,n,++c,"chain");o;){const u=t.size;Array.from(t).forEach(l=>{var d;(d=e==null?void 0:e[l])==null||d.forEach(m=>{p(m)&&t.add(m)})}),o=t.size>u,f(t,n,++c,"chain")}const s=Array.from(t);r[n]=new Set,s.forEach(u=>{const a=e[u];a&&a.forEach(l=>{p(l)||r[n].add(l)})}),r[n]=Array.from(r[n]),t.delete(n),f(t,n,null,"chain",15)}),r}function p(e){return C(e)&&e.length===1}function B(e){return e.toLowerCase()!==e.toUpperCase()}function C(e){return e.toUpperCase()===e&&B(e)}function A(e){const r=P(e),n={};return r.forEach(i=>{let[t,o]=i.split("->");o=o.split("|"),n[t]?n[t].push(...o):n[t]=o}),n}function P(e){let r=e.split(`
`);return r=r.map(n=>n.replaceAll(" ","")),r=r.filter(n=>!!n),r}function I(){return document.getElementById("input").value}function O(){const e=document.getElementById("input");e.value=`S -> A
A -> B|a
B -> C|b
C -> DD|c`}function L(){const e=document.getElementById("input");e.value=`S -> CCcC|AA|A
A -> EC|cc|a|B
B -> BC|BaB|a|C
C -> bb|a|c|E
E -> a`}function b(){const e=document.getElementById("input");e.value=`S -> O|P|a
P -> S|a|O
O -> U(P)|g 
U -> f|O`}
